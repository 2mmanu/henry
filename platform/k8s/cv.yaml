apiVersion: v1
kind: Pod
metadata:
  name: isp-cv-expert
  labels:
    app: isp-cv-expert
spec:
  containers:
    - name: isp-cv-expert
      image: 2mmanu/agentbuddy:latest
      command:
        [
          "sh",
          "-c",
          "python /app.py",
        ]
      env:
        - name: MEMGPT_BASEURL
          value: "http://my-memgpt:8083"
        - name: AGENT_NAME
          value: "isp-cv-expert"
        - name: PERSONA_NAME
          value: "isp-cv-expert"
        - name: AGENT_PURPOSE
          value: "CV Assistant: Description: CV Assistant manages candidates' resumes and provides detailed information about them, such as their work experience, education, and references. Example questions: - 'Who is the candidate and do we have their resume?' - 'Can you provide me with a copy of the candidate's resume?' - 'What are the candidate's past work experiences?'"
        - name: AGENT_HOST
          value: "isp-cv-expert"
        - name: AGENT_PORT
          value: "80"
        - name: AGENT_P_HOST
          value: "facilitator"
        - name: AGENT_P_PORT
          value: "80"
      volumeMounts:
        - name: code-volume
          mountPath: /app.py
          subPath: agent.py
        - name: code-utils-volume
          mountPath: /utils/memgpt.py
          subPath: memgpt.py
        - name: code-agent-volume
          mountPath: /agent/app.py
          subPath: app.py
  volumes:
    - name: code-volume
      configMap:
        name: agent-code
    - name: code-utils-volume
      configMap:
        name: utils-memgpt
    - name: code-agent-volume
      configMap:
        name: agent-app

---
apiVersion: v1
kind: Service
metadata:
  name: isp-cv-expert
spec:
  selector:
    app: isp-cv-expert
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
